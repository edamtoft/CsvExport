"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(){var e=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?",":arguments[0];_classCallCheck(this,e),this._delimiter=t,this._rows=[[]]}return _createClass(e,[{key:"_quote",value:function(e){return'"'+e.replace(/"/g,'""')+'"'}},{key:"writeValue",value:function(e){var t=String(e),n=t.indexOf(this._delimiter)!==-1||/"\r\n/.test(t);this._currentRow.push(n?this._quote(t):t)}},{key:"writeLine",value:function(){this._rows.push([])}},{key:"toString",value:function(){var e=this;return this._rows.map(function(t){return t.join(e._delimiter)}).reduce(function(e,t){return e+"\r\n"+t})}},{key:"toBlob",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"text/csv":arguments[0];return new Blob([this.toString()],{type:e})}},{key:"_currentRow",get:function(){return this._rows[this._rows.length-1]}}]),e}(),t=function(){function t(e){_classCallCheck(this,t),this._options=e||{}}return _createClass(t,[{key:"_createCsvBlob",value:function(t){var n=this._options.delimeter||",",r=this._options.headers||{},o=this._options.formatters||{},i=function(e){return o[e]||function(e){return e}},a=new e(n),u=Object.getOwnPropertyNames(t[0]).filter(function(e){return null!==r[e]});return u.forEach(function(e){return a.writeValue(r[e]||e)}),a.writeLine(),t.forEach(function(e){u.forEach(function(t){return a.writeValue(i(t)(e[t]))}),a.writeLine()}),a.toBlob("text/csv")}},{key:"_download",value:function(e,t){var n=document.createElement("A"),r=URL.createObjectURL(e);n.href=r,n.download=t,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}},{key:"downloadCsv",value:function(e){try{console.info("Generating CSV download");var t=this._createCsvBlob(e),n=this._options.filename||"export.csv";this._download(t,n)}catch(r){alert("Unable to create export: "+r.message),console.error(r)}}}],[{key:"create",value:function(e){return new t(e)}},{key:"download",value:function(e){return(new t).downloadCsv(e)}}]),t}();window.Export=t}();